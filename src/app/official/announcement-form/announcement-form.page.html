<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/official-dashboard"></ion-back-button>
    </ion-buttons>
    <ion-title>{{ isEditMode ? 'Edit' : 'Create' }} Announcement</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="form-wrapper">
    @if (isLoading && isEditMode) {
      <div class="loading-container">
        <ion-spinner name="crescent" color="primary"></ion-spinner>
        <p>Loading announcement...</p>
      </div>
    } @else {
      <div class="form-card">
        <!-- Form Header -->
        <div class="form-header">
          <h1>{{ isEditMode ? 'Edit' : 'Create New' }}</h1>
          <p>{{ isEditMode ? 'Update announcement details' : 'Share important information with residents' }}</p>
        </div>

        <!-- Form Content -->
        <form (ngSubmit)="onSubmit()" class="announcement-form">
          <!-- Title Input -->
          <div class="input-wrapper">
            <label class="input-label">Title *</label>
            <input 
              type="text"
              class="custom-input"
              [(ngModel)]="title" 
              name="title"
              placeholder="Enter announcement title"
              required
              [disabled]="isLoading">
          </div>

          <!-- Category Select -->
          <div class="input-wrapper">
            <label class="input-label">Category *</label>
            <ion-select 
              class="custom-select"
              [(ngModel)]="category" 
              name="category"
              placeholder="Select a category"
              interface="action-sheet"
              [disabled]="isLoading">
              @for (cat of categories; track cat) {
                <ion-select-option [value]="cat">{{ cat }}</ion-select-option>
              }
            </ion-select>
          </div>

          <!-- Description Textarea -->
          <div class="input-wrapper">
            <label class="input-label">Description *</label>
            <textarea 
              class="custom-textarea"
              [(ngModel)]="description" 
              name="description"
              rows="8"
              placeholder="Enter announcement details..."
              required
              [disabled]="isLoading">
            </textarea>
          </div>

          <!-- Submit Button -->
          <button 
            type="submit" 
            class="submit-button"
            [disabled]="isLoading || !title || !category || !description">
            @if (isLoading) {
              <ion-spinner name="crescent"></ion-spinner>
            } @else {
              <span>{{ isEditMode ? 'Update Announcement' : 'Create Announcement' }}</span>
            }
          </button>
        </form>
      </div>
    }
  </div>
</ion-content>
